<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  <meta name="generator" content="Hugo 0.80.0" /> 
  <meta name="description" content="Some description" />
   
  <link
    rel="apple-touch-icon"
    sizes="180x180"
    href="https://goatmobile.github.io/blog/apple-touch-icon.png"
  />

  <meta
    name="msapplication-TileColor"
    content="#da532c"
  />

  <meta name="theme-color" content="#ffffff" />

  
  <link rel="stylesheet" href="https://goatmobile.github.io/blog/css/style.dist.css" />
  <link rel="icon" type="image/x-icon" href="https://goatmobile.github.io/blog/favicon.ico">
  <script
    type="text/javascript"
    async
    src="https://goatmobile.github.io/blog/analytics.js"
  ></script>

  <style>
    body {
      font-family: 'Martel', sans-serif;
    }
  </style>

    
    <title>Fast Conda Initialization</title>
    

  

  <style>
  body {
    min-width: 300px;
    padding: 20px;
  }

  .custom-navbar {
    margin-bottom: 1em;
    height: 60px;
  }

  .custom-navbar a {
    display: inline-block;
    padding: 18px 0;
    margin-right: 1em;
    font-weight: bold;
  }

  .custom-navbar a:hover,
  .custom-navbar a:focus {
    text-decoration: none;
  }

  @media print {
    .custom-navbar {
      display: none;
    }
  }

  article {
    padding-bottom: 1em;
  }

  img {
    max-width: 100%;
  }

  
  body {
    background-color: #fff;
  }
  

  
  body {
    color: #212529;
  }
  

  
  a {
    color: #007bff;
  }
  

  
  a:hover,
  a:focus {
    color: #0056b3;
  }
  

  
  .custom-navbar {
    background-color: #212529;
  }
  

  
  .custom-navbar a {
    color: rgba(255, 255, 255, 0.75);
  }
  

  
  .custom-navbar a:hover,
  .custom-navbar a:focus {
    color: rgba(255, 255, 255, 1);
  }
  

  
  .container {
    max-width: 800px;
  }
  

  
  pre {
    display: block;
    padding: 9.5px;
    word-break: break-all;
    word-wrap: break-word;
    background-color: #f5f5f5;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  pre code {
    padding: 0;
    font-size: inherit;
    color: inherit;
    white-space: pre-wrap;
    background-color: transparent;
    border: none;
    border-radius: 0;
  }

  code {
    padding: 2px 4px;
    color: inherit;
    background-color: #f5f5f5;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-size: .9em;
  }
  

  @import url('https://rsms.me/inter/inter.css');
  html { font-family: 'Inter', sans-serif; }
  @supports (font-variation-settings: normal) {
    html { font-family: 'Inter var', sans-serif; }
  }

  code {
    font-family: 'Ubuntu Mono', monospace, serif;
  }

  
  blockquote,
  .blockquote {
    padding: 10px 20px;
    margin: 0 0 20px;
    font-size: 1em;
    border-left: 5px solid #6c757d;
  }
  
</style>

</head>


  <body>
    <div class="">
      <article><div class="prose max-w-2xl mx-auto">
    <a href="https://goatmobile.github.io/blog">
        <span class="mt-3">posts</span>
    </a>
    <h1 class="mt-3">Fast Conda Initialization</h1>
    <p><a href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a> is a great tool to manage Python installations that solves most of the common problems dealing with Python dependencies. By default its installation inserts some code into your shell initialization to set up the environment and muck with the shell prompt that looks something like this (for fish shell in <code>~/.confish/fish/config.fish</code>):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt;&gt;&gt; conda initialize &gt;&gt;&gt;
!! Contents within this block are managed by <span style="color:#e6db74">&#39;conda init&#39;</span> !!
<span style="color:#66d9ef">if</span> test -f /home/myusername/miniconda3/bin/conda
    eval /home/myusername/miniconda3/bin/conda <span style="color:#e6db74">&#34;shell.fish&#34;</span> <span style="color:#e6db74">&#34;hook&#34;</span> $argv | source
end
<span style="color:#f92672">&lt;&lt;&lt;</span> conda initialize <span style="color:#f92672">&lt;&lt;&lt;</span>
</code></pre></div><p>Conda initialization takes a second though which can get tedious. If you don&rsquo;t switch conda environments often it is enough to just set up the <code>PATH</code> environment variable for your base conda environment and add a macro to initialize conda fully on-demand only.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># replace the &#39;conda initialize&#39; block above with this</span>
set PATH $HOME/miniconda3/bin/python3 $PATH

<span style="color:#66d9ef">function</span> sourceconda
    eval $HOME/miniconda3/bin/conda <span style="color:#e6db74">&#34;shell.fish&#34;</span> <span style="color:#e6db74">&#34;hook&#34;</span> $argv | source
end
</code></pre></div><p>From my testing this reduces shell startup time from <code>350ms</code> to <code>15ms</code>.</p>

</div>
<script src="https://goatmobile.github.io/blog/copy.js"></script></article>
      <p class="text-center mt-4" id="contact"><a></a><span>enable js to see contact email</span></p>
    </div>
  </body>
</html>
